(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("0HMw"),n("7qfE"),n("lYjL"),n("IlJM"),n("uQK7"),n("8cZI"),n("lAJ5"),n("D/wG"),n("JjHl");var i=n("L7iC"),o=n.n(i),r=function(){function e(e){void 0===e&&(e=[]),this.items=e,this.selectedItemId=null,this.filteredItems=[]}var t=e.prototype;return t.filterItems=function(e){Object.values(e).every((function(e){return""===e}))&&(this.filteredItems=this.items),""!==e.nameOfMemberValue&&"All members"!==e.nameOfMemberValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.name.filter((function(t){return t===e.nameOfMemberValue})).join("")})))},t.getItemsFromLS=function(){if(localStorage.items)try{this.items=JSON.parse(localStorage.getItem("items")),this.filteredItems=this.items}catch(e){console.error("Error while parsing.")}},t.findItem=function(e){return this.items.find((function(t){return t.id===e}))},t.setSelectedItemId=function(e){this.selectedItemId=e},t.getSelectedItemId=function(){return this.selectedItemId},t.addItem=function(e){var t=e.title,n=e.name,i=e.dayOfWeek,r=e.time,a={id:o()(),title:t,name:n,time:r,dayOfWeek:i,row:["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"].indexOf(r),col:["Monday","Tuesday","Wednesday","Thursday","Friday"].indexOf(i)};return this.items.some((function(e){return e.dayOfWeek===a.dayOfWeek&&e.time===a.time}))?alert("Failed to create an event! Time slot is already booked"):this.items.push(a),a},t.deleteItem=function(e){this.items=this.items.filter((function(t){return t.id!==e}))},e}(),a=(n("RtS0"),n("4owi"),n("lmye"),n("WB5j"),n("WoWj"),n("3dw1"),function(){function e(){this.events={}}var t=e.prototype;return t.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},t.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,n)}))},e}());function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(e){this.name=e}var t,n,i;return t=e,(n=[{key:"name",get:function(){return this._name},set:function(e){return this._name=e}}])&&l(t.prototype,n),i&&l(t,i),e}();var c=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t)||this)._role=n,i}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(s),d={HELGA:"helga",PABLO:"pablo",KATE:"kate",ALEX:"alex"};function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){var t,n;function i(){var t;return(t=e.call(this)||this).formState={nameOfMemberValue:""},t.container=document.querySelector(".container"),t.authModal=document.querySelector(".modal-window-auth"),t.confirmUser=document.querySelector('button[data-action="confirm"]'),t.form=document.querySelector(".form"),t.main=document.querySelector(".main-content"),t.modal=document.querySelector(".modal-window"),t.selectNameMember=t.form.querySelector(".select--name"),t.createModalForm=t.modal.querySelector(".modal-form"),t.addNoteBtn=document.querySelector('button[data-action="add-note"]'),t.signoutBtn=document.querySelector('button[data-action="signout"]'),t.header=document.querySelector(".header-container"),t.cancelCreateBtn=document.querySelector('button[data-action="create-cancel"]'),$(document).ready((function(){$("#multiple-checkboxes").multiselect({includeSelectAllOption:!0})})),t.table=document.querySelector("table"),t.container.addEventListener("click",t.toggleDropdown),t.signoutBtn.addEventListener("click",t.signOut.bind(u(t))),t.selectNameMember.addEventListener("change",t.onSelectNameMemberChange.bind(u(t))),t.addNoteBtn.addEventListener("click",t.openCreateModal.bind(u(t))),t.createModalForm.addEventListener("submit",t.handleAdd.bind(u(t))),t.cancelCreateBtn.addEventListener("click",t.closeCreateModal.bind(u(t))),t.confirmUser.addEventListener("click",t.handleAuth.bind(u(t))),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=i.prototype;return o.onInput=function(e){this.formState.inputValue=e.target.value,this.emit("filter",this.formState)},o.onSelectNameMemberChange=function(e){this.formState.nameOfMemberValue=e.target.value,this.emit("filter",this.formState)},o.handleAdd=function(e){e.preventDefault();var t=this.modal.querySelector(".modal-form__input"),n=this.modal.querySelector(".modal-form__select-day"),i=this.modal.querySelector(".modal-form__select-time"),o=this.modal.querySelector("#multiple-checkboxes"),r=Array.from(o.options).filter((function(e){return e.selected})).map((function(e){return e.value}));if(t.value){var a={title:t.value.length>15?t.value.slice(0,16)+"...":t.value,dayOfWeek:n.value,time:i.value,name:r};this.emit("add",a),this.createModalForm.reset(),this.closeCreateModal()}else alert("Please, fill the field!")},o.createDOMElement=function(e,t,n){var i=document.createElement(e);t&&(i.dataset[t[0]]=t[1]),n&&(i.textContent=n);for(var o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];return r.forEach((function(e){return i.classList.add(e)})),i},o.createGreetings=function(e){return this.createDOMElement("h2",null,e,"name-user")},o.createNote=function(e){var t=this.createDOMElement("section",null,null,"event-list__section"),n=this.createDOMElement("div",["id",e.id],null,"item"),i=this.createDOMElement("h2",null,e.title,"item__title"),o=this.createDOMElement("div",null,null,"buttons-container"),r=this.createDOMElement("button",["action","delete"],"","button-delete");return o.append(r),n.append(i,o),t.append(n),this.appendEventListners(t),t},o.appendEventListners=function(e){e.querySelector('button[data-action="delete"]').addEventListener("click",this.handleDelete.bind(this))},o.handleDelete=function(e){var t=e.target.closest(".item");e.stopPropagation(),this.emit("delete",t.dataset.id)},o.deleteNote=function(e){this.table.querySelector('[data-id="'+e+'"]').closest("section").remove()},o.openCreateModal=function(){this.container.classList.add("modal--show")},o.closeCreateModal=function(){this.container.classList.remove("modal--show")},o.closeAuthModal=function(){this.container.classList.remove("modal--auth--show")},o.handleAuth=function(e){var t;e.preventDefault();var n=this.authModal.querySelector(".modal-form__select-name"),i=n.value.toLowerCase(),o=this.table.querySelectorAll('button[data-action="delete"]');switch(i){case d.ALEX:t=new c(i,!0),o.forEach((function(e){e.style.display="block"}));break;case d.HELGA:case d.PABLO:case d.KATE:t=new s(i),this.addNoteBtn.style.display="none",o.forEach((function(e){e.style.display="none"}));break;default:return}this.header.append(this.createGreetings("Hello, "+n.value)),localStorage.setItem("userRole",t._role),this.closeAuthModal()},o.signOut=function(){localStorage.removeItem("userRole"),location.reload()},o.init=function(e){var t,n=this;t=localStorage.getItem("userRole");for(var i=null,o=this.table.getElementsByTagName("td"),r=0;r<o.length;r++)o[r].innerHTML="";e.forEach((function(e){0===(i=n.table.rows[e.row+1].cells[e.col+1]).getElementsByTagName("section").length&&i.append(n.createNote(e))}));var a=this.table.querySelectorAll('button[data-action="delete"]');"true"!==t&&a.forEach((function(e){e.style.display="none"}))},o.nothingsFound=function(){for(var e=this.table.getElementsByTagName("td"),t=0;t<e.length;t++)e[t].innerHTML=""},i}(a),h=function(){function e(e,t){this.model=e,this.view=t,this.model.getItemsFromLS(),this.view.init(this.model.items),this.view.on("add",this.addNote.bind(this)),this.view.on("delete",this.deleteNote.bind(this)),this.view.on("filter",this.handleFilter.bind(this)),this.view.on("create-cancel",this.handleCreateCancel.bind(this))}var t=e.prototype;return t.handleFilter=function(e){this.model.filterItems(e),this.model.filteredItems.length?this.view.init(this.model.filteredItems):this.view.nothingsFound(),this.model.filteredItems=this.model.items},t.showAllNotes=function(){this.view.init(this.model.items)},t.handleCreateCancel=function(){this.view.closeCreateModal()},t.addNote=function(e){this.model.addItem(e);try{localStorage.setItem("items",JSON.stringify(this.model.items))}catch(e){console.error("Error while parsing.")}this.showAllNotes()},t.deleteNote=function(e){this.model.deleteItem(e);try{localStorage.setItem("items",JSON.stringify(this.model.items))}catch(e){console.error("Error while parsing.")}this.view.deleteNote(e)},e}(),f=new m;new h(new r,f)}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.aaa4e5bffc595f2fb81c.js.map