(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,i){},QfWi:function(e,t,i){"use strict";i.r(t);i("0HMw"),i("7qfE"),i("lYjL"),i("IlJM"),i("RtS0"),i("uQK7"),i("8cZI"),i("lmye"),i("lAJ5"),i("D/wG"),i("wCa+"),i("JjHl"),i("3dw1");var n=i("L7iC"),o=i.n(n),r=function(){function e(e){void 0===e&&(e=[]),this.items=e,this.selectedItemId=null,this.filteredItems=[]}var t=e.prototype;return t.filterItems=function(e){console.log("formState",e),Object.values(e).every((function(e){return""===e}))&&(this.filteredItems=this.items),""!==e.nameOfMemberValue&&"All members"!==e.nameOfMemberValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.name.filter((function(t){return t===e.nameOfMemberValue})).join("")})))},t.getItemsFromLS=function(){if(localStorage.items)try{this.items=JSON.parse(localStorage.getItem("items")),this.filteredItems=this.items}catch(e){console.error("Error while parsing.")}},t.findItem=function(e){return this.items.find((function(t){return t.id===e}))},t.setSelectedItemId=function(e){this.selectedItemId=e},t.getSelectedItemId=function(){return this.selectedItemId},t.addItem=function(e){var t=e.title,i=e.name,n=e.dayOfWeek,r=e.time,s={id:o()(),title:t,name:i,time:r,dayOfWeek:n,row:["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"].indexOf(r),col:["Monday","Tuesday","Wednesday","Thursday","Friday"].indexOf(n)};return this.items.some((function(e){return e.dayOfWeek===s.dayOfWeek&&e.time===s.time}))?alert("Failed to create an event! Time slot is already booked"):this.items.push(s),s},t.updateItem=function(e,t){var i=Object.assign({},this.findItem(e),t);this.items=this.items.map((function(t){return t.id===e?i:t}))},t.deleteItem=function(e){console.log("id",e),this.items=this.items.filter((function(t){return t.id!==e}))},t.updateProgressStatus=function(e){var t=this.findItem(e),i="Open"===t.progress?t.progress="Done":t.progress="Open";this.items.forEach((function(t){return t.id===e?i:t}))},e}();i("4owi"),i("WB5j"),i("WoWj");function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e){var t,i;function n(){var t;return(t=e.call(this)||this).formState={nameOfMemberValue:""},t.container=document.querySelector(".container"),t.form=document.querySelector(".form"),t.main=document.querySelector(".main-content"),t.modal=document.querySelector(".modal-window"),t.selectNameMember=t.form.querySelector(".select--name"),t.createModalForm=t.modal.querySelector(".modal-form"),t.addNoteBtn=document.querySelector('button[data-action="add-note"]'),t.cancelCreateBtn=document.querySelector('button[data-action="create-cancel"]'),$(document).ready((function(){$("#multiple-checkboxes").multiselect({includeSelectAllOption:!0})})),t.table=document.querySelector("table"),t.container.addEventListener("click",t.toggleDropdown),t.selectNameMember.addEventListener("change",t.onSelectNameMemberChange.bind(s(t))),t.addNoteBtn.addEventListener("click",t.openCreateModal.bind(s(t))),t.createModalForm.addEventListener("submit",t.handleAdd.bind(s(t))),t.cancelCreateBtn.addEventListener("click",t.closeCreateModal.bind(s(t))),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=n.prototype;return o.onInput=function(e){this.formState.inputValue=e.target.value,this.emit("filter",this.formState)},o.onSelectNameMemberChange=function(e){this.formState.nameOfMemberValue=e.target.value,this.emit("filter",this.formState)},o.handleAdd=function(e){e.preventDefault();var t=this.modal.querySelector(".modal-form__input"),i=this.modal.querySelector(".modal-form__select-day"),n=this.modal.querySelector(".modal-form__select-time"),o=this.modal.querySelector("#multiple-checkboxes"),r=Array.from(o.options).filter((function(e){return e.selected})).map((function(e){return e.value}));if(t.value){var s={title:t.value.length>15?t.value.slice(0,16)+"...":t.value,dayOfWeek:i.value,time:n.value,name:r};this.emit("add",s),this.createModalForm.reset(),this.closeCreateModal()}else alert("Please, fill the field!")},o.createDOMElement=function(e,t,i){var n=document.createElement(e);t&&(n.dataset[t[0]]=t[1]),i&&(n.textContent=i);for(var o=arguments.length,r=new Array(o>3?o-3:0),s=3;s<o;s++)r[s-3]=arguments[s];return r.forEach((function(e){return n.classList.add(e)})),n},o.createNote=function(e){var t=this.createDOMElement("section",null,null,"event-list__section"),i=this.createDOMElement("div",["id",e.id],null,"item"),n=this.createDOMElement("h2",null,e.title,"item__title"),o=this.createDOMElement("div",null,null,"buttons-container"),r=this.createDOMElement("span",null,e.time,"item__time"),s=this.createDOMElement("span",null,e.name,"item__name"),l=this.createDOMElement("span",null,e.dayOfWeek,"item__dayOfWeek"),a=this.createDOMElement("button",["action","delete"],"","button-delete");return o.append(r,s,l,a),i.append(n,o),t.append(i),this.appendEventListners(t),t},o.appendEventListners=function(e){e.querySelector('button[data-action="delete"]').addEventListener("click",this.handleDelete.bind(this))},o.handleDelete=function(e){var t=e.target.closest(".item");e.stopPropagation(),this.emit("delete",t.dataset.id)},o.deleteNote=function(e){this.table.querySelector('[data-id="'+e+'"]').closest("section").remove()},o.openEditModal=function(e){this.container.classList.add("modal--edit-show"),this.editModal.querySelector(".modal-form__input").value=e.title},o.openCreateModal=function(){this.container.classList.add("modal--show")},o.closeCreateModal=function(){this.container.classList.remove("modal--show")},o.closeEditModal=function(){this.container.classList.remove("modal--edit-show")},o.updateNote=function(e,t){var i=t.title;this.noteList.querySelector('.item[data-id="'+e+'"] .item__title').textContent=i},o.init=function(e){var t=this,i=null;console.log("notes",e);for(var n=this.table.getElementsByTagName("td"),o=0;o<n.length;o++)n[o].innerHTML="";e.forEach((function(e){0===(i=t.table.rows[e.row+1].cells[e.col+1]).getElementsByTagName("section").length&&i.append(t.createNote(e))}))},o.nothingsFound=function(){for(var e=this.table.getElementsByTagName("td"),t=0;t<e.length;t++)e[t].innerHTML=""},n}(function(){function e(){this.events={}}var t=e.prototype;return t.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},t.emit=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,i)}))},e}()),a=function(){function e(e,t){this.model=e,this.view=t,this.model.getItemsFromLS(),this.view.init(this.model.items),this.view.on("add",this.addNote.bind(this)),this.view.on("delete",this.deleteNote.bind(this)),this.view.on("filter",this.handleFilter.bind(this)),this.view.on("create-cancel",this.handleCreateCancel.bind(this)),this.view.on("edit-start",this.handleEditStart.bind(this)),this.view.on("edit-cancel",this.handleEditCancel.bind(this)),this.view.on("edit-success",this.handleEditSuccess.bind(this))}var t=e.prototype;return t.handleFilter=function(e){this.model.filterItems(e),this.model.filteredItems.length?this.view.init(this.model.filteredItems):this.view.nothingsFound(),this.model.filteredItems=this.model.items},t.showAllNotes=function(){this.view.init(this.model.items)},t.handleEditSuccess=function(e){var t=this.model.getSelectedItemId();this.model.updateItem(t,e);try{localStorage.setItem("items",JSON.stringify(this.model.items))}catch(e){console.error("Error while parsing.")}this.view.updateNote(t,e)},t.handleEditStart=function(e){console.log("id",e);var t=this.model.findItem(e);this.model.setSelectedItemId(e),this.view.openEditModal(t)},t.handleEditCancel=function(){this.view.closeEditModal()},t.handleCreateCancel=function(){this.view.closeCreateModal()},t.addNote=function(e){this.model.addItem(e);try{localStorage.setItem("items",JSON.stringify(this.model.items))}catch(e){console.error("Error while parsing.")}this.showAllNotes()},t.deleteNote=function(e){this.model.deleteItem(e);try{localStorage.setItem("items",JSON.stringify(this.model.items))}catch(e){console.error("Error while parsing.")}this.view.deleteNote(e)},e}(),d=new l;new a(new r,d)}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.8e10249a67a1391e9a42.js.map