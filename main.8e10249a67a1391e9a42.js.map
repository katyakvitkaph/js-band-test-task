{"version":3,"sources":["webpack:///./js/model.js","webpack:///./js/view.js","webpack:///./js/services/event-emitter.js","webpack:///./js/controller.js","webpack:///./index.js"],"names":["Model","items","this","selectedItemId","filteredItems","filterItems","formState","console","log","Object","values","every","el","nameOfMemberValue","filter","item","name","join","getItemsFromLS","localStorage","JSON","parse","getItem","e","error","findItem","id","find","setSelectedItemId","getSelectedItemId","addItem","title","dayOfWeek","time","shortid","row","indexOf","col","some","alert","push","updateItem","note","itemToUpdate","map","deleteItem","updateProgressStatus","currentItem","newItem","progress","forEach","View","container","document","querySelector","form","main","modal","selectNameMember","createModalForm","addNoteBtn","cancelCreateBtn","$","ready","multiselect","includeSelectAllOption","table","addEventListener","toggleDropdown","onSelectNameMemberChange","bind","openCreateModal","handleAdd","closeCreateModal","onInput","inputValue","target","value","emit","preventDefault","selected","Array","from","options","option","length","slice","reset","createDOMElement","tag","dataAttribute","text","element","createElement","dataset","textContent","classes","className","classList","add","createNote","section","itemTitle","buttonsContainer","buttonDelete","append","appendEventListners","handleDelete","parent","closest","stopPropagation","deleteNote","remove","openEditModal","editModal","closeEditModal","updateNote","noteList","init","notes","cell","cellsData","getElementsByTagName","i","innerHTML","rows","cells","nothingsFound","events","on","type","callback","args","Controller","model","view","addNote","handleFilter","handleCreateCancel","handleEditStart","handleEditCancel","handleEditSuccess","showAllNotes","setItem","stringify"],"mappings":"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","file":"main.8e10249a67a1391e9a42.js","sourcesContent":["import shortid from 'shortid';\r\n\r\nexport default class Model {\r\n  constructor(items = []) {\r\n    this.items = items;\r\n    this.selectedItemId = null;\r\n    this.filteredItems = [];\r\n  }\r\n\r\n  filterItems(formState) {\r\n    console.log('formState', formState);\r\n    const isEmptyState = Object.values(formState).every(el => el === '');\r\n    if (isEmptyState) {\r\n      this.filteredItems = this.items;\r\n    }\r\n    if (\r\n      formState.nameOfMemberValue !== '' &&\r\n      formState.nameOfMemberValue !== 'All members'\r\n    ) {\r\n\r\n      this.filteredItems = this.filteredItems.filter(\r\n        item =>\r\n        item.name.filter(el => el === formState.nameOfMemberValue).join('')\r\n      );\r\n\r\n    }\r\n  }\r\n\r\n  getItemsFromLS() {\r\n    if (localStorage.items) {\r\n      try {\r\n        this.items = JSON.parse(localStorage.getItem('items'));\r\n        this.filteredItems = this.items;\r\n      } catch (e) {\r\n        console.error('Error while parsing.');\r\n      }\r\n    }\r\n  }\r\n\r\n  findItem(id) {\r\n    return this.items.find(item => item.id === id);\r\n  }\r\n\r\n  setSelectedItemId(id) {\r\n    this.selectedItemId = id;\r\n  }\r\n\r\n  getSelectedItemId() {\r\n    return this.selectedItemId;\r\n  }\r\n\r\n  addItem({\r\n    title,\r\n    name,\r\n    dayOfWeek,\r\n    time\r\n  }) {\r\n    const timeOfDay = [\r\n      '10:00',\r\n      '11:00',\r\n      '12:00',\r\n      '13:00',\r\n      '14:00',\r\n      '15:00',\r\n      '16:00',\r\n      '17:00',\r\n      '18:00',\r\n    ];\r\n    const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\n\r\n    const item = {\r\n      id: shortid(),\r\n      title,\r\n      name,\r\n      time,\r\n      dayOfWeek,\r\n      row: timeOfDay.indexOf(time),\r\n      col: daysOfWeek.indexOf(dayOfWeek),\r\n    };\r\n    const checkTime = this.items.some(\r\n      el => el.dayOfWeek === item.dayOfWeek && el.time === item.time,\r\n    );\r\n\r\n    !checkTime\r\n      ?\r\n      this.items.push(item) :\r\n      alert('Failed to create an event! Time slot is already booked');\r\n\r\n    return item;\r\n  }\r\n\r\n  updateItem(id, note) {\r\n    const itemToUpdate = {\r\n      ...this.findItem(id),\r\n      ...note\r\n    };\r\n    this.items = this.items.map(item => (item.id === id ? itemToUpdate : item));\r\n  }\r\n\r\n  deleteItem(id) {\r\n    console.log('id', id);\r\n    this.items = this.items.filter(item => item.id !== id);\r\n  }\r\n\r\n  updateProgressStatus(id) {\r\n    const currentItem = this.findItem(id);\r\n    const newItem =\r\n      currentItem.progress === 'Open' ?\r\n      (currentItem.progress = 'Done') :\r\n      (currentItem.progress = 'Open');\r\n\r\n    this.items.forEach(item => (item.id === id ? newItem : item));\r\n  }\r\n}\r\n","import EventEmitter from './services/event-emitter';\r\n\r\nexport default class View extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.formState = {\r\n      nameOfMemberValue: '',\r\n    };\r\n    this.container = document.querySelector('.container');\r\n    this.form = document.querySelector('.form');\r\n    this.main = document.querySelector('.main-content');\r\n    this.modal = document.querySelector('.modal-window');\r\n\r\n    this.selectNameMember = this.form.querySelector('.select--name');\r\n    this.createModalForm = this.modal.querySelector('.modal-form');\r\n\r\n    this.addNoteBtn = document.querySelector('button[data-action=\"add-note\"]');\r\n\r\n    this.cancelCreateBtn = document.querySelector(\r\n      'button[data-action=\"create-cancel\"]',\r\n    );\r\n\r\n    $(document).ready(function () {\r\n      $('#multiple-checkboxes').multiselect({\r\n        includeSelectAllOption: true,\r\n      });\r\n    });\r\n    this.table = document.querySelector('table');\r\n\r\n    this.container.addEventListener('click', this.toggleDropdown);\r\n\r\n\r\n    this.selectNameMember.addEventListener(\r\n      'change',\r\n      this.onSelectNameMemberChange.bind(this),\r\n    );\r\n    this.addNoteBtn.addEventListener('click', this.openCreateModal.bind(this));\r\n    this.createModalForm.addEventListener('submit', this.handleAdd.bind(this));\r\n    this.cancelCreateBtn.addEventListener(\r\n      'click',\r\n      this.closeCreateModal.bind(this),\r\n    );\r\n  }\r\n\r\n  onInput(e) {\r\n    this.formState.inputValue = e.target.value;\r\n    this.emit('filter', this.formState);\r\n  }\r\n\r\n  onSelectNameMemberChange(e) {\r\n    this.formState.nameOfMemberValue = e.target.value;\r\n    this.emit('filter', this.formState);\r\n  }\r\n\r\n  handleAdd(e) {\r\n    e.preventDefault();\r\n    const title = this.modal.querySelector('.modal-form__input');\r\n    const dayOfWeek = this.modal.querySelector('.modal-form__select-day');\r\n    const time = this.modal.querySelector('.modal-form__select-time');\r\n    const name = this.modal.querySelector('#multiple-checkboxes');\r\n\r\n    let selected = Array.from(name.options).filter(function (name) {\r\n      return name.selected;\r\n    }).map(function (option) {\r\n      return option.value;\r\n    });\r\n\r\n    if (!title.value) {\r\n      alert('Please, fill the field!');\r\n    } else {\r\n      const note = {\r\n        title: title.value.length > 15 ?\r\n          title.value.slice(0, 16) + '...' :\r\n          title.value,\r\n        dayOfWeek: dayOfWeek.value,\r\n        time: time.value,\r\n        name: selected,\r\n      };\r\n\r\n      this.emit('add', note);\r\n      this.createModalForm.reset();\r\n      this.closeCreateModal();\r\n    }\r\n  }\r\n  createDOMElement(tag, dataAttribute, text, ...classes) {\r\n    const element = document.createElement(tag);\r\n    dataAttribute\r\n      ?\r\n      (element.dataset[dataAttribute[0]] = dataAttribute[1]) :\r\n      null;\r\n    text ? (element.textContent = text) : null;\r\n    classes.forEach(className => element.classList.add(className));\r\n    return element;\r\n  }\r\n\r\n  createNote(note) {\r\n    const section = this.createDOMElement(\r\n      'section',\r\n      null,\r\n      null,\r\n      'event-list__section',\r\n    );\r\n    const item = this.createDOMElement('div', ['id', note.id], null, 'item');\r\n\r\n    const itemTitle = this.createDOMElement(\r\n      'h2',\r\n      null,\r\n      note.title,\r\n      'item__title',\r\n    );\r\n\r\n    const buttonsContainer = this.createDOMElement(\r\n      'div',\r\n      null,\r\n      null,\r\n      'buttons-container',\r\n    );\r\n\r\n    const time = this.createDOMElement('span', null, note.time, 'item__time');\r\n    const name = this.createDOMElement('span', null, note.name, 'item__name');\r\n\r\n    const dayOfWeek = this.createDOMElement(\r\n      'span',\r\n      null,\r\n      note.dayOfWeek,\r\n      'item__dayOfWeek',\r\n    );\r\n\r\n    const buttonDelete = this.createDOMElement(\r\n      'button',\r\n      ['action', 'delete'],\r\n      '',\r\n      'button-delete'\r\n    );\r\n\r\n    buttonsContainer.append(time, name, dayOfWeek, buttonDelete);\r\n    item.append(itemTitle, buttonsContainer);\r\n    section.append(item);\r\n    this.appendEventListners(section);\r\n\r\n    return section;\r\n  }\r\n\r\n  appendEventListners(item) {\r\n    const deleteBtn = item.querySelector('button[data-action=\"delete\"]');\r\n    deleteBtn.addEventListener('click', this.handleDelete.bind(this));\r\n  }\r\n\r\n\r\n  handleDelete(e) {\r\n    const parent = e.target.closest('.item');\r\n    e.stopPropagation();\r\n    this.emit('delete', parent.dataset.id);\r\n  }\r\n\r\n  deleteNote(id) {\r\n    const item = this.table.querySelector(`[data-id=\"${id}\"]`);\r\n    item.closest('section').remove();\r\n  }\r\n\r\n  openEditModal(note) {\r\n    this.container.classList.add('modal--edit-show');\r\n    const title = this.editModal.querySelector('.modal-form__input');\r\n    title.value = note.title;\r\n  }\r\n\r\n  openCreateModal() {\r\n    this.container.classList.add('modal--show');\r\n  }\r\n\r\n  closeCreateModal() {\r\n    this.container.classList.remove('modal--show');\r\n  }\r\n\r\n  closeEditModal() {\r\n    this.container.classList.remove('modal--edit-show');\r\n  }\r\n\r\n  updateNote(id, {\r\n    title\r\n  }) {\r\n    const elTitle = this.noteList.querySelector(\r\n      `.item[data-id=\"${id}\"] .item__title`,\r\n    );\r\n\r\n    elTitle.textContent = title;\r\n  }\r\n\r\n  init(notes) {\r\n    let cell = null;\r\n    console.log('notes', notes);\r\n\r\n    let cellsData = this.table.getElementsByTagName('td');\r\n\r\n    for (let i = 0; i < cellsData.length; i++) {\r\n      cellsData[i].innerHTML = '';\r\n    }\r\n\r\n    notes.forEach(note => {\r\n      cell = this.table.rows[note.row + 1].cells[note.col + 1];\r\n      const item = cell.getElementsByTagName('section');\r\n      if (item.length === 0) {\r\n        cell.append(this.createNote(note));\r\n      }\r\n    });\r\n  }\r\n\r\n  nothingsFound() {\r\n    let cellsData = this.table.getElementsByTagName('td');\r\n    for (let i = 0; i < cellsData.length; i++) {\r\n      cellsData[i].innerHTML = '';\r\n    }\r\n  }\r\n}\r\n","export default class EventEmitter {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n\r\n  on(type, callback) {\r\n    this.events[type] = this.events[type] || [];\r\n    this.events[type].push(callback);\r\n  }\r\n  emit(type, ...args) {\r\n    if (this.events[type]) {\r\n      this.events[type].forEach(callback => callback(...args));\r\n    }\r\n  }\r\n}\r\n","export default class Controller {\r\n  constructor(model, view) {\r\n    this.model = model;\r\n    this.view = view;\r\n\r\n    this.model.getItemsFromLS();\r\n    this.view.init(this.model.items);\r\n    this.view.on(\"add\", this.addNote.bind(this));\r\n    this.view.on(\"delete\", this.deleteNote.bind(this));\r\n    this.view.on(\"filter\", this.handleFilter.bind(this));\r\n    this.view.on(\"create-cancel\", this.handleCreateCancel.bind(this));\r\n    this.view.on(\"edit-start\", this.handleEditStart.bind(this));\r\n    this.view.on(\"edit-cancel\", this.handleEditCancel.bind(this));\r\n    this.view.on(\"edit-success\", this.handleEditSuccess.bind(this));\r\n\r\n  }\r\n  handleFilter(formState) {\r\n    this.model.filterItems(formState);\r\n    this.model.filteredItems.length ?\r\n      this.view.init(this.model.filteredItems) :\r\n      this.view.nothingsFound();\r\n\r\n    this.model.filteredItems = this.model.items;\r\n  }\r\n\r\n  showAllNotes() {\r\n    this.view.init(this.model.items);\r\n  }\r\n\r\n\r\n  handleEditSuccess(note) {\r\n    const id = this.model.getSelectedItemId();\r\n    this.model.updateItem(id, note);\r\n    try {\r\n      localStorage.setItem(\"items\", JSON.stringify(this.model.items));\r\n    } catch (e) {\r\n      console.error(\"Error while parsing.\");\r\n    }\r\n    this.view.updateNote(id, note);\r\n  }\r\n\r\n  handleEditStart(id) {\r\n    console.log('id', id);\r\n    const note = this.model.findItem(id);\r\n    this.model.setSelectedItemId(id);\r\n\r\n    this.view.openEditModal(note);\r\n  }\r\n\r\n  handleEditCancel() {\r\n    this.view.closeEditModal();\r\n  }\r\n\r\n  handleCreateCancel() {\r\n    this.view.closeCreateModal();\r\n  }\r\n\r\n  addNote(note) {\r\n    this.model.addItem(note);\r\n    try {\r\n      localStorage.setItem(\"items\", JSON.stringify(this.model.items));\r\n    } catch (e) {\r\n      console.error(\"Error while parsing.\");\r\n    }\r\n    this.showAllNotes();\r\n  }\r\n\r\n  deleteNote(id) {\r\n    this.model.deleteItem(id);\r\n    try {\r\n      localStorage.setItem(\"items\", JSON.stringify(this.model.items));\r\n    } catch (e) {\r\n      console.error(\"Error while parsing.\");\r\n    }\r\n    this.view.deleteNote(id);\r\n  }\r\n}\r\n","import \"./sass/main.scss\";\r\nimport Model from \"./js/model\";\r\nimport View from \"./js/view\";\r\nimport Controller from \"./js/controller\";\r\n\r\nconst view = new View();\r\nconst model = new Model();\r\n\r\nnew Controller(model, view);\r\n"],"sourceRoot":""}