(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("0HMw"),n("7qfE"),n("lYjL"),n("IlJM"),n("RtS0"),n("IvQZ"),n("uQK7"),n("8cZI"),n("lmye"),n("lAJ5"),n("D/wG"),n("JBxO"),n("JjHl"),n("FdtR"),n("4NM0"),n("3dw1"),n("wcNg");var r=n("L7iC"),i=n.n(r),a=n("QJ3N"),o=(n("bzha"),n("VTFT")),s=n("czhI"),c=n.n(s);function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function d(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var h=new(function(){function e(){this.server="http://158.101.166.74:8080/api/data/kate_kiriuhina",this.axios=c.a}var t=e.prototype;return t.initUsers=function(){var e=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.server+"/users",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t.getAllUsers=function(){var e=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get(this.server+"/users");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t.addEvent=function(){var e=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.server+"/events",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t.getAllEvents=function(){var e=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get(this.server+"/events");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t.deleteEvent=function(){var e=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.delete(this.server+"/events/"+t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}()),f=function(){function e(e){void 0===e&&(e=[]),this.items=e,this.selectedItemId=null,this.filteredItems=[]}var t=e.prototype;return t.filterItems=function(e){Object.values(e).every((function(e){return""===e}))&&(this.filteredItems=this.items),""!==e.nameOfMemberValue&&"All members"!==e.nameOfMemberValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.name.filter((function(t){return t===e.nameOfMemberValue})).join("")})))},t.getEvents=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAllEvents().then((function(e){return e&&(getObject=e.map((function(e){return JSON.parse(e.data)})).forEach((function(e){return n.items.push(e)}))),Object(a.success)({text:"Events loaded successfully!",closerHover:!1,delay:1e3}),n.items})).catch();case 2:t();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,s,"next",e)}function s(e){d(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),t.findItem=function(e){return this.items.find((function(t){return t.id===e}))},t.setSelectedItemId=function(e){this.selectedItemId=e},t.getSelectedItemId=function(){return this.selectedItemId},t.addItem=function(e){var t=e.title,n=e.name,r=e.dayOfWeek,o=e.time,s={id:i()(),title:t,name:n,time:o,dayOfWeek:r,row:["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"].indexOf(o),col:["Monday","Tuesday","Wednesday","Thursday","Friday"].indexOf(r)};null!==this.items&&(this.items.some((function(e){return e.dayOfWeek===s.dayOfWeek&&e.time===s.time}))?Object(a.alert)("Failed to create an event! Time slot is already booked"):this.items.push(s));try{h.addEvent({data:JSON.stringify(s)}).then((function(e){return Object(a.success)({text:"Added new event.",closerHover:!1,delay:1e3}),e.data}))}catch(e){console.error("Error while parsing."),Object(a.error)({text:"Erorr! The event hasn't been added!",closerHover:!1,delay:1e3})}return s},t.initUser=function(){h.getAllUsers().then((function(e){if(null===e.data)for(var t=0;t<=o.length;t+=1)h.initUsers({data:""+o[t].data}).then((function(e){return e}))}))},t.deleteItem=function(e){var t;h.getAllEvents().then((function(n){var r=n.map((function(e){return e.data})).find((function(t){return t.includes(e)})),i=n.filter((function(e){return e.data===r})).find((function(e){return e.id}));t=i.id,h.deleteEvent(t).then((function(){Object(a.success)({text:"Deleted.",closerHover:!1,delay:1e3})}))})),this.items=this.items.filter((function(t){return t.id!==e}))},e}(),m=(n("4owi"),n("WB5j"),n("WoWj"),function(){function e(){return"object"==typeof e.instance?e.instance:(this.events={},e.instance=this,this)}var t=e.prototype;return t.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},t.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,n)}))},e}()),v={HELGA:"helga",PABLO:"pablo",KATE:"kate",ALEX:"alex"};function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(e){this.name=e}var t,n,r;return t=e,(n=[{key:"name",get:function(){return this._name},set:function(e){return this._name=e}}])&&p(t.prototype,n),r&&p(t,r),e}();function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t,n;function r(t){var n,r=t.name,i=t.role;return(n=e.call(this,r)||this)._role=i,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n),r}(y),g=function(){function e(){}return e.create=function(e,t){switch(e){case v.HELGA:case v.PABLO:return new y(t);case v.ALEX:return new b(t);case v.KATE:return new y(t)}},e}(),E=new m,O=function(){function e(){this.formState={nameOfMemberValue:"",isAdmin:!1},this.id=i()(),this.container=document.querySelector(".container"),this.authModal=document.querySelector(".modal-window-auth"),this.selectedUser=this.authModal.querySelector(".modal-form__select-name"),this.confirmUser=document.querySelector('button[data-action="confirm"]'),this.form=document.querySelector(".form"),this.main=document.querySelector(".main-content"),this.modal=document.querySelector(".modal-window"),this.selectNameMember=this.form.querySelector(".select--name"),this.createModalForm=this.modal.querySelector(".modal-form"),this.addNoteBtn=document.querySelector('button[data-action="add-note"]'),this.signoutBtn=document.querySelector('button[data-action="signout"]'),this.header=document.querySelector(".header-container"),this.cancelCreateBtn=document.querySelector('button[data-action="create-cancel"]'),$(document).ready((function(){$("#multiple-checkboxes").multiselect({includeSelectAllOption:!0})})),this.table=document.querySelector("table"),this.container.addEventListener("click",this.toggleDropdown),this.signoutBtn.addEventListener("click",this.signOut.bind(this)),this.selectNameMember.addEventListener("change",this.onSelectNameMemberChange.bind(this)),this.addNoteBtn.addEventListener("click",this.openCreateModal.bind(this)),this.createModalForm.addEventListener("submit",this.handleAdd.bind(this)),this.cancelCreateBtn.addEventListener("click",this.closeCreateModal.bind(this)),this.confirmUser.addEventListener("click",this.handleAuth.bind(this))}var t=e.prototype;return t.onSelectNameMemberChange=function(e){this.formState.nameOfMemberValue=e.target.value,E.emit("filter",this.formState)},t.handleAdd=function(e){e.preventDefault();var t=this.modal.querySelector(".modal-form__input"),n=this.modal.querySelector(".modal-form__select-day"),r=this.modal.querySelector(".modal-form__select-time"),i=this.modal.querySelector("#multiple-checkboxes"),a=Array.from(i.options).filter((function(e){return e.selected})).map((function(e){return e.value}));if(t.value){var o={title:t.value.length>15?t.value.slice(0,16)+"...":t.value,dayOfWeek:n.value,time:r.value,name:a};E.emit("add",o),this.createModalForm.reset(),this.closeCreateModal()}else alert({text:"Please, fill the field!"})},t.createDOMElement=function(e,t,n){var r=document.createElement(e);t&&(r.dataset[t[0]]=t[1]),n&&(r.textContent=n);for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return a.forEach((function(e){return r.classList.add(e)})),r},t.createGreetings=function(e){return this.createDOMElement("h2",null,e,"name-user")},t.createNote=function(e){var t=this.createDOMElement("section",null,null,"event-list__section"),n=this.createDOMElement("div",["id",e.id],null,"item"),r=this.createDOMElement("h2",null,e.title,"item__title"),i=this.createDOMElement("div",null,null,"buttons-container"),a=this.createDOMElement("button",["action","delete"],"","button-delete");return i.append(a),n.append(r,i),t.append(n),this.appendEventListners(t),t},t.appendEventListners=function(e){e.querySelector('button[data-action="delete"]').addEventListener("click",this.handleDelete.bind(this))},t.handleDelete=function(e){var t=e.target.closest(".item");e.stopPropagation(),E.emit("delete",t.dataset.id)},t.deleteNote=function(e){this.table.querySelector('[data-id="'+e+'"]').closest("section").remove()},t.openCreateModal=function(){this.container.classList.add("modal--show")},t.closeCreateModal=function(){this.container.classList.remove("modal--show")},t.closeAuthModal=function(){this.container.classList.remove("modal--auth--show")},t.handleAuth=function(e){e.preventDefault();var t=this.authModal.querySelector(".modal-form__select-name"),n=t.value.toLowerCase(),r=this.table.querySelectorAll('button[data-action="delete"]');switch(n){case v.ALEX:this.formState.isAdmin=g.create(n,{name:""+t.value,role:!0}),r.forEach((function(e){e.style.display="block"}));break;case v.HELGA:case v.PABLO:case v.KATE:g.create(n,""+t.value),this.addNoteBtn.style.display="none",r.forEach((function(e){e.style.display="none"}));break;default:return}this.header.append(this.createGreetings("Hello, "+t.value)),this.closeAuthModal()},t.signOut=function(){localStorage.removeItem("userRole"),location.reload()},t.init=function(e){for(var t=this,n=null,r=this.table.getElementsByTagName("td"),i=0;i<r.length;i++)r[i].innerHTML="";e.forEach((function(e){0===(n=t.table.rows[e.row+1].cells[e.col+1]).getElementsByTagName("section").length&&n.append(t.createNote(e))}));var a=this.table.querySelectorAll('button[data-action="delete"]');!this.formState.isAdmin&&a.forEach((function(e){e.style.display="none"}))},t.nothingsFound=function(){for(var e=this.table.getElementsByTagName("td"),t=0;t<e.length;t++)e[t].innerHTML=""},e}(),A=new m,S=function(){function e(e,t){var n=this;this.model=e,this.view=t,this.model.initUser(),A.on("add",this.addNote.bind(this)),A.on("delete",this.deleteNote.bind(this)),A.on("filter",this.handleFilter.bind(this)),A.on("show-all",this.showAllNotes.bind(this)),this.handleCreateCancel(),this.model.getEvents((function(){return n.view.init(n.model.items)}))}var t=e.prototype;return t.handleFilter=function(e){this.model.filterItems(e),this.model.filteredItems.length?this.view.init(this.model.filteredItems):this.view.nothingsFound(),this.model.filteredItems=this.model.items},t.showAllNotes=function(){A.on("show-all",this.view.init(this.model.items))},t.handleCreateCancel=function(){this.view.closeCreateModal()},t.addNote=function(e){this.model.addItem(e),this.showAllNotes()},t.deleteNote=function(e){this.model.deleteItem(e),this.view.deleteNote(e)},e}(),M=new O;new S(new f,M)},VTFT:function(e){e.exports=JSON.parse('[{"id":"1","data":"Alex"},{"id":"2","data":"Pablo"},{"id":"3","data":"Kate"},{"id":"4","data":"Helga"}]')}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.598fbc0b45df9bbcabb2.js.map